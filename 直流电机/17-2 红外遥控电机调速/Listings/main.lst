C51 COMPILER V9.00   MAIN                                                                  04/07/2024 18:05:54 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Keil4\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objec
                    -ts\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Key.h"
   4          #include "Nixie.h"
   5          #include "Motor.h"
   6          #include "IR.h"
   7          
   8          void main()
   9          {
  10   1          unsigned char Command, Speed = 0; // 设置初始速度为0
  11   1          unsigned int DutyCycle = 0; // 占空比
  12   1      
  13   1          Motor_Init();
  14   1          IR_Init();
  15   1          while(1)
  16   1          {
  17   2              if(IR_GetDataFlag())    // 如果接收到数据帧
  18   2              {
  19   3                  Command=IR_GetCommand();        // 获取遥控器指令码
  20   3                  
  21   3                  if(Command==IR_1){Speed++; if(Speed > 3) Speed = 3;}    // 按IR_1键时速度加一
  22   3                  if(Command==IR_2){Speed--; if(Speed < 0) Speed = 0;}    // 按IR_2键时速度减一
  23   3                  
  24   3                  if(Speed==0){Motor_SetSpeed(0); DutyCycle = 0;}    // 速度输出
  25   3                  if(Speed==1){Motor_SetSpeed(50); DutyCycle = 25;} // 占空比为25%
  26   3                  if(Speed==2){Motor_SetSpeed(75); DutyCycle = 50;} // 占空比为50%
  27   3                  if(Speed==3){Motor_SetSpeed(100); DutyCycle = 75;} // 占空比为75%
  28   3              }
  29   2              Nixie(1,DutyCycle/100);    // 数码管显示占空比百位
  30   2              Nixie(2,(DutyCycle%100)/10);    // 数码管显示占空比十位
  31   2              Nixie(3,DutyCycle%10);    // 数码管显示占空比个位
  32   2          }
  33   1      }
  34          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    185    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
