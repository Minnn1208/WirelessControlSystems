/**************************************************************************************
пƼ޹˾PRECHIN У
֧֣www.prechin.net
PRECHIN
 

ʵƣDS18B20¶ȴʵ
˵	
ʵس󣬲DS18B20¶ȴʾ¶ֵ
עע¶ȴķڽӿڴѾ˿ӡһ͹
		  ֻҪ¶ȴӦ뼴																				  
***************************************************************************************/
#include "public.h"
#include "ds18b20.h"
#include "lcd1602.h"


/*******************************************************************************
*          : main
* 		 : 
*            : 
*         	 : 
*******************************************************************************/
void main()
{	
	u8 i=0;
   	int temp_value;
//	u8 temp_buf[5];

	ds18b20_init();//ʼDS18B20
	lcd1602_init();//ʼLCD1602
	LcdWriteCom(0x88);	//дַ 80ʾʼַ
	LcdWriteData('C'); 

	while(1)
	{				
		i++;
		if(i%50==0)//һʱȡ¶ֵʱҪ¶ȴת¶ʱ
			temp_value=ds18b20_read_temperture()*10;//¶ֵСһλ
		if(temp_value<0)//¶
		{
			temp_value=-temp_value;
			LcdWriteData('-');//ʾ
			//Ϊȡ¶ʵ¶ȵĲ룬Լ1ȡԭ
			temp=temp-1;
			temp=~temp;
			tp=temp;
			temp=tp*0.0625*100+0.5;	
			//С*100+0.5룬ΪCԸתΪ͵ʱС
			//ԶȥǷ0.5+0.5֮0.5ľǽ1ˣС0.5ľ
			//0.5С档	
		}
		else
			LcdWriteData('+');//ʾ
	

	}		
}
